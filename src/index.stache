<html>
  <head>
    <title>{{title}}</title>
    {{asset "css"}}
  </head>
  <body>
    <can-import from="bootstrap/less/bootstrap.less!" />
    <can-import from="donejs-chat/styles.less!" />
    <can-import from="donejs-chat/app" as="viewModel" />

    <div class="container">
      <div class="row">
        <div class="col-sm-8 col-sm-offset-2">
        {{#switch page}}
          {{#case 'chat'}}
          <can-import from="donejs-chat/messages/">
            {{#if isPending}}
              Loading...
            {{else}}
              <chat-messages></chat-messages>
            {{/if}}
          </can-import>
          {{/case}}

          {{#default}}
          <can-import from="donejs-chat/home.component!">
            {{#if isPending}}
              Loading...
            {{else}}
              <chat-home page="{page}" class="well"></chat-home>
            {{/if}}
          </can-import>
          {{/default}}
        {{/switch}}
        </div>
      </div>
    </div>

    {{asset "inline-cache"}}

    {{#switch @env.NODE_ENV}}
      {{#case "production"}}
        <script src="http://donejs-chat.divshot.io/node_modules/steal/steal.production.js"  main="donejs-chat/index.stache!done-autorender"></script>
      {{/case}}
      {{#default}}
        <script src="/node_modules/steal/steal.js"></script>
      {{/default}}
    {{/switch}}
  </body>
</html>
